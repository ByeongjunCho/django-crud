{% extends 'articles/base.html' %}
{% block body %}
{% load bootstrap4 %}
<h1>{{ article.id }}번 글</h1>
<h2>{{ article.title }}</h2>
<p>작성일자 : {{ article.created_at }}</p>
<p>수정일자 : {{ article.updated_at }}</p>
<hr>
<p>{{ article.content }}</p>
<a href="{% url 'articles:index' %}">목록으로</a>
<a href="{% url 'articles:delete' article.pk %}">[X]</a>
<form action="{% url 'articles:delete' article.pk %}" method='POST' onclick="return confirm('지울꺼임?')">
    {% csrf_token %}
    <input type="submit" value="삭제">
</form>
<a href="{% url 'articles:update' article.pk %}">수정하기</a>
<hr>
<form action="{% url 'articles:comment_create' article.pk %}" method='POST'>
    {% csrf_token %}
    {% bootstrap_form comment_form %}
    {% buttons %}
        <button type="submit" class="btn btn-primary">댓글 작성</button>
    {% endbuttons %}
</form>

{% comment %} <form action="" method="POST" class="form">
    {% csrf_token %}
    {% bootstrap_form comment_form %}
    {% buttons %}
        <button type="submit" class="btn btn-primary">Submit</button>
    {% endbuttons %}
</form> {% endcomment %}

{% comment %} {{ comment_form.as_p }} {% endcomment %}

<h2>댓글 작성</h2>
<h3>댓글 수: {{comments.count}}</h3>
{% for comment in comments %}
    <li>{{comment.content}}</li>
    <li>{{comment.created_at}}</li>
    
    <form action="{% url 'articles:comment_delete' article.pk comment.pk %}" method='POST'>
        {% csrf_token %}
        <input type="submit" value="댓글 삭제">
    </form>
    <hr>
{% empty %}
    <p>댓글이 없다.</p>

{% endfor %}

{% comment %} {% for comment in article.comment_set.all %}
    <li>{{comment.content}}</li>
    <li>{{comment.created_at}}</li>
    <hr>
{% endfor %}

{{ a.0 }} {% endcomment %}
{% endblock %}